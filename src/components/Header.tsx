import { memo, useEffect, useState } from "react";
import { Link } from "react-router-dom";
import "../styles/Header.css";
import Menu from "./home/Menu";

function Header() {
  const [menu, setMenu] = useState(false);
  const [theme, setTheme] = useState(localStorage.getItem("theme") || "dark");
  const localTheme = localStorage.getItem("theme") || "dark";

  const toggleMenu = () => setMenu(!menu);
  const toggleTheme = () => {
    const html = document.querySelector("html");
    if (theme)
      localStorage.setItem("theme", theme === "dark" ? "light" : "dark");
    setTheme(theme === "dark" ? "light" : "dark");

    html?.setAttribute("data-theme", theme === "dark" ? "light" : "dark");
  };

  useEffect(() => {
    setTheme(localTheme);
  }, [localTheme]);

  return (
    <>
      {menu && <Menu toggleMenu={toggleMenu} />}
      <header role="banner" className="app_header">
        <section className="logo">
          <a href="/" aria-label="Home">
            <svg
              className="img"
              version="1.1"
              id="Layer_1"
              xmlns="http://www.w3.org/2000/svg"
              x="0px"
              y="0px"
              width="100%"
              viewBox="0 0 1649 1649"
              enableBackground="new 0 0 1649 1649"
            >
              <path
                fill="currentColor"
                opacity="1.000000"
                stroke="none"
                d="
M1114.214600,575.214294 
	C969.393738,720.047241 824.817017,864.624390 680.242126,1009.203369 
	C640.063660,1049.382935 599.873230,1089.550781 559.761414,1129.796753 
	C557.466614,1132.099243 555.166809,1132.960205 551.944214,1132.955444 
	C487.118317,1132.860229 422.292236,1132.880371 357.466217,1132.841309 
	C355.658600,1132.840210 353.851257,1132.441772 352.043793,1132.228638 
	C351.866272,1131.750000 351.688751,1131.271240 351.511230,1130.792603 
	C355.560638,1126.588501 359.568878,1122.343628 363.668304,1118.188965 
	C371.334747,1110.419189 379.017395,1102.664551 386.759827,1094.970581 
	C398.489105,1083.314941 410.319000,1071.760254 422.022705,1060.079224 
	C430.880524,1051.238403 439.546265,1042.204956 448.414917,1033.375244 
	C454.725555,1027.092285 461.302643,1021.077209 467.631744,1014.812195 
	C474.848328,1007.668823 481.883606,1000.342651 489.066986,993.165283 
	C497.275177,984.963867 505.610931,976.889771 513.796936,968.666504 
	C522.295898,960.128784 530.620911,951.417725 539.135559,942.895874 
	C546.882080,935.143005 554.854431,927.615601 562.592041,919.854004 
	C570.216431,912.205872 577.586731,904.304260 585.224060,896.669373 
	C592.974365,888.921387 600.998047,881.446716 608.747620,873.697937 
	C616.035095,866.411011 623.072937,858.875061 630.307983,851.534912 
	C639.255981,842.457031 648.286438,833.460388 657.294983,824.442383 
	C666.357605,815.370056 675.390991,806.267944 684.522156,797.265015 
	C693.568848,788.345398 702.820618,779.632263 711.799194,770.645569 
	C720.539673,761.897156 728.935181,752.803772 737.687500,744.067688 
	C748.256348,733.518555 759.116150,723.261108 769.706848,712.733459 
	C777.017395,705.466553 784.005005,697.875427 791.285522,690.577454 
	C797.573242,684.274536 804.128784,678.239624 810.460144,671.979187 
	C818.045471,664.479004 825.500488,656.847107 833.045410,649.305786 
	C840.891602,641.463135 848.828613,633.710754 856.631653,625.825562 
	C863.883728,618.497192 870.931274,610.965576 878.216248,603.670715 
	C885.848022,596.028687 893.691101,588.598083 901.375671,581.007996 
	C908.966125,573.510864 916.467957,565.924011 924.019287,558.387207 
	C933.216614,549.207581 942.427368,540.041504 951.627380,530.864563 
	C954.671692,527.827881 958.182678,525.109741 960.592773,521.630981 
	C962.739563,518.532288 965.248840,518.013855 968.477600,518.015015 
	C1033.636963,518.038513 1098.796265,518.028625 1163.955688,518.077454 
	C1165.666992,518.078735 1167.377808,518.662292 1170.358398,519.205750 
	C1150.977417,538.536255 1132.718384,556.747681 1114.214600,575.214294 
z"
              />
              <path
                fill="currentColor"
                opacity="1.000000"
                stroke="none"
                d="
M1129.196289,1027.803711 
	C1163.717529,1062.267090 1197.984131,1096.485107 1233.138794,1131.590088 
	C1230.591431,1132.208008 1229.178955,1132.849365 1227.765991,1132.850464 
	C1161.951904,1132.898682 1096.137695,1132.921997 1030.324097,1132.760742 
	C1028.038452,1132.755127 1025.211182,1131.391479 1023.553711,1129.739990 
	C971.268066,1077.644775 919.095459,1025.436279 866.907837,973.242798 
	C851.122253,957.455444 835.387512,941.616760 819.514465,925.917847 
	C817.044739,923.475159 816.324036,921.909912 819.232239,919.158691 
	C826.409607,912.369202 833.266846,905.241211 840.254761,898.251343 
	C847.312927,891.191223 854.373474,884.133545 861.432800,877.074585 
	C869.716919,868.790955 878.047546,860.553284 886.273621,852.212402 
	C897.867249,840.456970 909.327454,828.569824 920.947266,816.840698 
	C934.468140,803.192505 948.050842,789.604675 961.698486,776.083313 
	C973.420715,764.469543 985.353882,753.068237 997.039673,741.418457 
	C1005.956238,732.529236 1014.513184,723.276794 1023.523560,714.486694 
	C1025.137207,712.912537 1028.178711,712.128662 1030.565063,712.120178 
	C1070.386353,711.978577 1110.208130,712.018433 1150.029907,712.018555 
	C1175.189209,712.018616 1200.348633,712.006042 1225.507935,712.049194 
	C1227.309326,712.052307 1229.109863,712.466858 1232.037964,712.829712 
	C1230.246460,714.917664 1229.394897,716.053589 1228.401367,717.047485 
	C1167.738770,777.729309 1107.052490,838.387146 1046.409180,899.088196 
	C1039.854858,905.648804 1033.674683,912.585938 1027.056152,919.078491 
	C1024.380615,921.703125 1024.480591,923.211548 1027.109741,925.825317 
	C1057.238037,955.777405 1087.246094,985.850403 1117.285645,1015.891785 
	C1121.172607,1019.779053 1125.056274,1023.669617 1129.196289,1027.803711 
z"
              />
            </svg>
          </a>
        </section>
        <section className="content" role="navigation">
          <nav className="nav" aria-label="Main Navigation">
            <ul className="nav_list">
              <li className="nav_item">
                <Link className="nav_link" to="/" replace>
                  Home
                </Link>
              </li>
              <li className="nav_item">
                <Link className="nav_link" to="/projects" replace>
                  Projects
                </Link>
              </li>
              <li className="nav_item">
                <Link className="nav_link" to="/about" replace>
                  About
                </Link>
              </li>
              <li className="nav_item">
                <Link
                  className="nav_link"
                  to="https://discord.gg/qDRcUqhU46"
                  target="_blank"
                >
                  Discord
                </Link>
              </li>
            </ul>
          </nav>
          <hr className="content_hr" />
          <button
            className="content_btn toggle_theme"
            onClick={toggleTheme}
            aria-label="Toggle Theme"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              className="icon"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              strokeWidth="2"
              stroke="currentColor"
              fill="none"
              strokeLinecap="round"
              strokeLinejoin="round"
              aria-hidden="true"
            >
              {localTheme === "dark" ? (
                <>
                  <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                  <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" />
                  <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7" />
                </>
              ) : (
                <>
                  <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                  <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
                </>
              )}
            </svg>
          </button>
          <a
            className="content_link github"
            href="https://github.com/Kuda-Development"
            target="_blank"
            aria-label="GitHub Link"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              className="icon"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              strokeWidth="2"
              stroke="currentColor"
              fill="none"
              strokeLinecap="round"
              strokeLinejoin="round"
            >
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
            </svg>
          </a>
          <button className="content_btn toggle_menu" aria-label="Toggle Menu">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              className="icon"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              strokeWidth="2"
              stroke="currentColor"
              fill="none"
              strokeLinecap="round"
              strokeLinejoin="round"
              onClick={toggleMenu}
            >
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
              <path d="M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
              <path d="M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            </svg>
          </button>
        </section>
      </header>
    </>
  );
}

export default memo(Header);
